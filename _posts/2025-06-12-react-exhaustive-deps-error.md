---
layout: single
title: React ì»¤ìŠ¤í…€ í›…ì—ì„œë§Œ ë‚˜íƒ€ë‚˜ëŠ” `exhaustive-deps` ê²½ê³ ì˜ ê¸°ìˆ ì  ë°°ê²½
date: 2025-06-12 00:49:30.000000000 +09:00
type: post
header:
    teaser: "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/React-icon.svg/200px-React-icon.svg.png"
    image: "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/React-icon.svg/200px-React-icon.svg.png"
categories:
- IT
tags: [react]
---

### `useRef` ì™€ `useEffect` ì˜ ì˜ì¡´ì„± ì§„ë‹¨

## ì»¤ìŠ¤í…€ í›…ì—ì„œë§Œ ë‚˜íƒ€ë‚˜ëŠ” `exhaustive-deps` ê²½ê³ ì˜ ê¸°ìˆ ì  ë°°ê²½

#### ë¬¸ì œ ì œê¸°

ë™ì¼í•œ `ref` ê°ì²´ë¥¼ ì‚¬ìš©í•˜ëŠ” ë‘ ì‹œë‚˜ë¦¬ì˜¤ê°€ ìˆë‹¤.

1. **ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€**ì—ì„œ ì§ì ‘ `useRef()` í˜¸ì¶œ
2. **ì»¤ìŠ¤í…€ í›…**ì´ `useRef()` ê²°ê³¼ë¥¼ ë°˜í™˜

ë‘ ê²½ìš° ëª¨ë‘ ëŸ°íƒ€ì„ ë™ì‘ì€ ê°™ì§€ë§Œ, ESLint ê·œì¹™ `react-hooks/exhaustive-deps` ëŠ” ë‘ ë²ˆì§¸ íŒ¨í„´ì—ë§Œ â€œì˜ì¡´ì„± ë°°ì—´ì— refë¥¼ ì¶”ê°€í•˜ë¼â€ëŠ” ê²½ê³ ë¥¼ ë„ìš´ë‹¤. ì™œ ê·¸ëŸ´ê¹Œ?

---

## 1. React ëŸ°íƒ€ì„: `useRef` ê°ì²´ì˜ **ì•ˆì •ì„±(Stable Identity)**

`useRef()` ëŠ” ìµœì´ˆ ë Œë”ì—ì„œ ë‹¨ í•œ ë²ˆ `{ current }` ê°ì²´ë¥¼ ìƒì„±í•˜ë©°, ì´í›„ ë Œë”ì—ì„œë„ **ê°™ì€ ê°ì²´ ì°¸ì¡°ë¥¼ ì¬ì‚¬ìš©**í•œë‹¤. React ê³µì‹ ë¬¸ì„œëŠ” ì´ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ë³´ì¥í•œë‹¤. ([stackoverflow.com][1])

```tsx
function Comp() {
  const boxRef = useRef<HTMLDivElement>(null); // í•­ìƒ ë™ì¼í•œ ê°ì²´
  /* â€¦ */
}
```

> **ê²°ê³¼**
>
> * ì˜ì¡´ì„± ë°°ì—´ì´ `[]`ë“  `[boxRef]`ë“ , ê°ì²´ ì°¸ì¡°(ì‹ë³„ì)ê°€ ë³€í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ `useEffect`ëŠ” *ì¶”ê°€ ì‹¤í–‰*ë˜ì§€ ì•ŠëŠ”ë‹¤.
> * ê°œë°œìš© Strict Mode ì—ì„œëŠ” ì˜ë„ì ìœ¼ë¡œ ì´ˆê¸° ë Œë”ê°€ ë‘ ë²ˆ ì¼ì–´ë‚˜ë¯€ë¡œ, ë‘ ë²ˆ ëª¨ë‘ ë§ˆìš´íŠ¸Â·ì–¸ë§ˆìš´íŠ¸ íš¨ê³¼ê°€ í˜¸ì¶œëœë‹¤.

---

## 2. `exhaustive-deps` ê·œì¹™: **ì •ì  ë¶„ì„ì˜ í•œê³„**

`eslint-plugin-react-hooks` ëŠ” ì»´íŒŒì¼ íƒ€ì„ì— ì†ŒìŠ¤ ì½”ë“œë¥¼ ìŠ¤ìº”í•˜ë©°, ë‚´ë¶€ì ìœ¼ë¡œ *â€œì•ˆì • ë°˜í™˜ê°’(Stable Return Value) í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸â€* ë¥¼ ìœ ì§€í•œë‹¤.

```text
SAFE_RETURNS = { useRef, useState, useReducer, â€¦ }
```

* **ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€**ì—ì„œ *ì§ì ‘* í˜¸ì¶œëœ í›…ì´ ì´ ëª©ë¡ì— í¬í•¨ë˜ë©´, í•´ë‹¹ ë³€ìˆ˜ëŠ” *ìë™ìœ¼ë¡œ ì•ˆì •í•˜ë‹¤ê³  ê°„ì£¼*ë˜ì–´ ì˜ì¡´ì„± ë°°ì—´ ìƒëµì´ í—ˆìš©ëœë‹¤.
* **ì»¤ìŠ¤í…€ í›…**ì€ í•¨ìˆ˜ ë³¸ë¬¸ì„ ì—´ì–´ë³¼ ìˆ˜ ì—†ëŠ” *ë¸”ë™ë°•ìŠ¤*ë‹¤. ì •ì  ë¶„ì„ ë„êµ¬ëŠ” í•´ë‹¹ í›…ì´ ë§¤ë²ˆ ë‹¤ë¥¸ ê°ì²´ë¥¼ ìƒì„±í•  ê°€ëŠ¥ì„±ì„ ë°°ì œí•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ, *ë³´ìˆ˜ì * ì „ëµì„ ì·¨í•´ ê²½ê³ ë¥¼ ì¶œë ¥í•œë‹¤. ì´ ì„¤ê³„ ì›ì¹™ì€ GitHub ì´ìŠˆì—ì„œë„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ([github.com][2], [github.com][3])

ì¦‰, ë¬¸ì œì˜ ê·¼ì›ì€ **ëŸ°íƒ€ì„ ë³´ì¦**ê³¼ **ì •ì  ë¶„ì„ íŒíŠ¸** ê°„ì˜ ì •ë³´ ë¹„ëŒ€ì¹­ì— ìˆë‹¤.

---

## 3. ëŸ°íƒ€ì„ ë¹„êµ: `[]` vs `[ref]`

| ì˜ì¡´ì„± ë°°ì—´  | ì¬ì‹¤í–‰ ì¡°ê±´             | í”„ë¡œë•ì…˜ ê¸°ì¤€ ì‹¤í–‰ íšŸìˆ˜\* |
| ------- | ------------------ | --------------- |
| `[]`    | ì¡°ê±´ ì—†ìŒ              | 1íšŒ              |
| `[ref]` | `ref` ê°ì²´ ì°¸ì¡°ê°€ ë°”ë€” ë•Œë§Œ | ê°ì²´ê°€ ë¶ˆë³€ â‡’ 1íšŒ     |

\* React Strict Mode(ê°œë°œ í™˜ê²½)ì—ì„œëŠ” ì˜ë„ì ìœ¼ë¡œ +1íšŒ

`ref.current` ê°’ì€ mutable í•˜ë¯€ë¡œ ì˜ì¡´ì„±ì— ë„£ì–´ë„ ë³€ê²½ì„ **ê°ì§€í•˜ì§€ ì•ŠëŠ”ë‹¤**. ê°’ ë³€í™”ë¥¼ íŠ¸ë˜í‚¹í•˜ë ¤ë©´ `useState`, `useSyncExternalStore`, ì½œë°± ref ë“± ë³„ë„ íŒ¨í„´ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

---

## 4. ì‹¤ë¬´ ëŒ€ì‘ ì „ëµ

| ë°©ë²•                         | êµ¬í˜„ ì˜ˆ                                                      | ì¥ì  / ê³ ë ¤ ì‚¬í•­                                |
| -------------------------- | --------------------------------------------------------- | ----------------------------------------- |
| **refë¥¼ ë°°ì—´ì— ì¶”ê°€**            | `useEffect(fn, [myRef]);`                                 | ref ì‹ë³„ìëŠ” ë¶ˆë³€ â†’ ì‹¤í–‰ 1íšŒ, ê²½ê³  í•´ì†Œ                |
| **effectë¥¼ í›… ë‚´ë¶€ë¡œ ì´ë™**       | `useFocusRef()` ë‚´ë¶€ì—ì„œ `useEffect` ì‹¤í–‰                       | ì»´í¬ë„ŒíŠ¸ ì½”ë“œ ê°„ê²°, ê²½ê³  ìì²´ ì œê±°                      |
| **ESLint ë¬´ì‹œ ì£¼ì„**           | `// eslint-disable-next-line react-hooks/exhaustive-deps` | ìµœí›„ ìˆ˜ë‹¨. ìœ ì§€ë³´ìˆ˜ ë¦¬ìŠ¤í¬ ì¡´ì¬                        |
| **ì»¤ìŠ¤í…€ í›…ì„ â€˜ì•ˆì • í›…â€™ìœ¼ë¡œ ë“±ë¡(í¬í¬)** | í¬í¬ëœ `exhaustive-deps` í”ŒëŸ¬ê·¸ì¸ ì‚¬ìš©                             | ê³µì‹ ê·œì¹™ì—” ë¯¸ì§€ì›; íŒ€ ê·œëª¨ì— ë”°ë¼ ê²€í†  ([reddit.com][4]) |

---

## 5. ê²°ë¡ 

1. **React ëŸ°íƒ€ì„**ì€ `useRef` ë°˜í™˜ ê°ì²´ì˜ *ì‹ë³„ì ë¶ˆë³€*ì„ ë³´ì¦í•œë‹¤.
2. **`exhaustive-deps` ê·œì¹™**ì€ ë‚´ì¥ í›…ë§Œ ì•ˆì • ê°’ìœ¼ë¡œ ì·¨ê¸‰í•˜ê³ , ì»¤ìŠ¤í…€ í›…ì€ ì ì¬ì  ë³€ë™ ê°’ìœ¼ë¡œ ê°€ì •í•œë‹¤.
3. ê²°ê³¼ì ìœ¼ë¡œ `[ref]`ë¥¼ ë„£ë“  `[]`ë¡œ ë‘ë“  ì‹¤í–‰ íšŸìˆ˜ëŠ” ë™ì¼í•˜ì§€ë§Œ, *ì •ì  ë¶„ì„ ê²½ê³ *ëŠ” ì»¤ìŠ¤í…€ í›…ì—ì„œë§Œ ë…¸ì¶œëœë‹¤.
4. ê²½ê³ ë¥¼ ì œê±°í•˜ë ¤ë©´ **refë¥¼ ë°°ì—´ì— ì¶”ê°€**í•˜ê±°ë‚˜ **effectë¥¼ í›… ë‚´ë¶€ë¡œ ì˜®ê¸°ëŠ”** ë°©ì‹ì´ ê°€ì¥ ì•ˆì „í•˜ê³  ìœ ì§€ë³´ìˆ˜ì— ìš°í˜¸ì ì´ë‹¤.

> ëŸ°íƒ€ì„ ë³´ì¦ê³¼ ì •ì  ë¶„ì„ ê°„ì˜ ì‹œê° ì°¨ì´ë¥¼ ì´í•´í•˜ë©´ â€œì™œ ë‚˜ë§Œ ê²½ê³ ë¥¼ ë³´ëŠ”ì§€â€ í˜¼ë€ìŠ¤ëŸ¬ìš¸ ì´ìœ ê°€ ì‚¬ë¼ì§„ë‹¤. í”„ë¡œì íŠ¸ ê·œì¹™ì— ë§ì¶”ì–´ ì˜ì¡´ì„± ë°°ì—´ì„ ì¡°ì •í•˜ê±°ë‚˜ í›… ì„¤ê³„ë¥¼ ì¬êµ¬ì„±í•˜ë©´ ê¹”ë”í•˜ê²Œ í•´ê²°ëœë‹¤. Happy Hooking! ğŸª

---

[1]: https://stackoverflow.com/questions/72402329/what-is-the-exact-behaviour-of-useref-react-hook-does-the-object-get-recreated?utm_source=chatgpt.com "What is the exact behaviour of useRef react hook? Does the object ..."
[2]: https://github.com/facebook/react/issues/22539?utm_source=chatgpt.com "Allow custom hooks to return stable results Â· Issue #22539 - GitHub"
[3]: https://github.com/facebook/react/issues/24112?utm_source=chatgpt.com "Suggestion: [eslint-plugin-react-hooks] - exhaustive-deps ... - GitHub"
[4]: https://www.reddit.com/r/reactjs/comments/1d5rkro/can_eslint_reacthooksexhaustivedeps_safely_be/?utm_source=chatgpt.com "Can ESLint \"react-hooks/exhaustive-deps\" safely be ignored with ..."
